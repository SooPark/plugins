version: 0.1
runtimes:
  enabled:
  - go@1.18.3
  - node@16.14.2
  - python@3.10.3
plugins:
  sources:
  - id: trunk
    ref: v0.0.4
    uri: https://github.com/trunk-io/plugins
cli:
  version: 0.17.0-beta.8
lint:
  enabled:
  - cspell@6.8.1
  - actionlint@1.6.15
  - black@22.6.0
  - flake8@4.0.1:
      packages:
      - flake8-bugbear@21.9.2
  - git-diff-check@SYSTEM
  - gitleaks@8.8.12
  - isort@5.10.1
  - markdownlint@0.32.0
  - prettier@2.7.1
  - shellcheck@0.8.0
  - shfmt@3.5.0
actions:
  definitions:
  - id: toggle-local
    runtime: python
    display_name: Toggle Local
    description: Toggle plugins repo between local and remote ref automatically
    packages_file: tools/toggle-local/requirements.txt
    run: ${plugin}/tools/toggle-local/toggle flip ${workspace} ${@}
    output_type: notification_v1
    triggers:
    - git_hooks:
      - pre-push
      run: ${plugin}/tools/toggle-local/toggle flip ${workspace} --remote --pre-push
    - files:
      - plugin.yaml
      - actions/**
      - lint/**
      run: ${plugin}/tools/toggle-local/toggle notify ${workspace}
  enabled:
  - git-lfs
  - toggle-local
  - trunk-fmt-pre-commit
